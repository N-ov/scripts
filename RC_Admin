getgenv().RCA = {
    Prefix = ':'
}

if not RCA.executed then
    getgenv().RCA.executed = true
    
    local l;l = hookmetamethod(game, '__namecall', function(self, ...)
        
        if getnamecallmethod():lower() == 'kick' then
            return error() 
        end
        
        return l(self, ...)
    end)


    local Player = game:GetService('Players').LocalPlayer
    
    local function RemoveSpaces(String)
    	return String:gsub("%s+", "") or String
    end
    
    local function FindPlayer(String)
    	String = RemoveSpaces(String)
    	for _, _Player in pairs(game:GetService'Players':GetPlayers()) do
    		if _Player.Name:lower():match('^'.. String:lower()) then
    			return _Player
    		end
    	end
    	return nil
    end
    
    local function RunCommand(msg)
        if msg:sub(1, #RCA.Prefix) == RCA.Prefix then
            local command = msg:split(' ')[1]:gsub(RCA.Prefix, '')
            local target = FindPlayer(msg:split(' ')[2])
            
            if rawget(RCA.Commands, command) and target then
                print('launching')
                RCA.Commands[command](target) 
            end
            
        end
    end
    
    local function RepHumanoid()
        local hum = Player.Character.Humanoid
        local fakehum = hum:Clone()
        fakehum.Parent = hum.Parent
        fakehum.Name = "1"
        fakehum.Animator:Destroy()
        hum:Destroy()
        fakehum.Name = "Humanoid" 
    end
    
    RCA.Commands = {
        kick = function(TargetPlayer)
            local OldPosition = Player.Character.HumanoidRootPart.CFrame
            workspace.Camera.CameraSubject = TargetPlayer.Character.Humanoid
            
            RepHumanoid()
            
            for _,v in pairs(Player.Backpack:GetChildren()) do
                if v.ClassName == 'Tool' then
                    v.Parent = Player.Character
                end
            end
            
            for _ = 1,10 do
                wait()
                Player.Character.Humanoid:ChangeState(11)
                Player.Character.HumanoidRootPart.CFrame = TargetPlayer.Character.HumanoidRootPart.CFrame
            end
            
            wait()
            
            for _ = 1,3 do
                wait(.2)
                Player.Character.HumanoidRootPart.CFrame = Player.Character.HumanoidRootPart.CFrame * CFrame.new(0,-90,0)
            end
            
            Player.Character.HumanoidRootPart.Anchored = true
            
            for _,v in pairs(Player.Character:GetChildren()) do
                if v.ClassName == 'Tool' then
                    v.Parent = Player.Backpack
                end
            end
            
            wait(4.2)
            repeat wait() until 
            game.Players.LocalPlayer.Character and 
            game.Players.LocalPlayer.Character:FindFirstChild'HumanoidRootPart'
            wait()
            for _ = 1,20 do
                wait()
                pcall(function()
                    Player.Character.HumanoidRootPart.CFrame = OldPosition
                end)
            end
            
            workspace.Camera.CameraSubject = Player.Character.Humanoid
        end
    }
    
    Player.Chatted:Connect(function(msg)
        
        RunCommand(msg)
        
    end)

end
